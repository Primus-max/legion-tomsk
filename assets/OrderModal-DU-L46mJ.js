import{_ as G,f as b,c as O,p as B,d as o,o as a,b as s,y as N,q as $,v as d,z as T,F as i,l as q,t as p,A as H,e as m,i as I,B as g}from"./index-DdOgXw-h.js";class e{constructor({key:_,label:h,type:y="text",required:U=!1,options:v=[],allowCustom:k=!1}){this.key=_,this.label=h,this.type=y,this.required=U,this.options=v,this.allowCustom=k}}class w{constructor({key:_,label:h,fields:y}){this.key=_,this.label=h,this.fields=y}}const c=["Toyota","BMW","Mercedes","Audi","Lexus","Volkswagen","Hyundai","Kia","Ford","Nissan"],Q={Toyota:["Camry","Land Cruiser","Corolla"],BMW:["3 Series","5 Series","X5"],Mercedes:["E-Class","S-Class","GLC"],Audi:["A4","Q5","A6"],Lexus:["RX","ES","GX"],Volkswagen:["Passat","Tiguan","Polo"],Hyundai:["Solaris","Tucson","Creta"],Kia:["Rio","Sportage","Ceed"],Ford:["Focus","Kuga","Mondeo"],Nissan:["Qashqai","X-Trail","Almera"]},V=[{value:"Кожа",label:"Кожа",img:"/legion-tomsk/images/materials/leather.jpg"},{value:"Алькантара",label:"Алькантара",img:"/legion-tomsk/images/materials/alcantara.jpg"},{value:"Экокожа",label:"Экокожа",img:"/legion-tomsk/images/materials/eco-leather.jpg"},{value:"Комбинированно",label:"Комбинированно",img:"/legion-tomsk/images/materials/combined.jpg"}],f=["Черный","Бежевый","Коричневый","Красный","Серый","Синий","Белый","Другой"],E=[new w({key:"peretyazhka",label:"Перетяжка",fields:[new e({key:"brand",label:"Марка авто",type:"select",required:!0,options:c,allowCustom:!0}),new e({key:"model",label:"Модель авто",type:"select",required:!0,options:[],allowCustom:!0}),new e({key:"workType",label:"Тип работ",type:"select",required:!0,options:["Сиденья","Руль","Потолок","Двери","Пол","Торпедо","Подлокотник","Комбинированно"]}),new e({key:"material",label:"Материал",type:"carousel",required:!0,options:V}),new e({key:"color",label:"Цвет",type:"select",required:!1,options:f,allowCustom:!0}),new e({key:"comment",label:"Комментарий",type:"textarea",required:!1}),new e({key:"name",label:"Имя",type:"text",required:!0}),new e({key:"phone",label:"Телефон",type:"phone",required:!0}),new e({key:"email",label:"Email",type:"email",required:!1})]}),new w({key:"tuning",label:"Тюнинг",fields:[new e({key:"brand",label:"Марка авто",type:"select",required:!0,options:c,allowCustom:!0}),new e({key:"model",label:"Модель авто",type:"select",required:!0,options:[],allowCustom:!0}),new e({key:"workType",label:"Тип работ",type:"select",required:!0,options:["Тюнинг салона","Детали интерьера","Панели","Комбинированно"]}),new e({key:"material",label:"Материал",type:"carousel",required:!1,options:V}),new e({key:"color",label:"Цвет",type:"select",required:!1,options:f,allowCustom:!0}),new e({key:"comment",label:"Комментарий",type:"textarea",required:!1}),new e({key:"name",label:"Имя",type:"text",required:!0}),new e({key:"phone",label:"Телефон",type:"phone",required:!0}),new e({key:"email",label:"Email",type:"email",required:!1})]}),new w({key:"restoration",label:"Реставрация",fields:[new e({key:"brand",label:"Марка авто",type:"select",required:!0,options:c,allowCustom:!0}),new e({key:"model",label:"Модель авто",type:"select",required:!0,options:[],allowCustom:!0}),new e({key:"workType",label:"Тип работ",type:"select",required:!0,options:["Восстановление кожи","Ремонт сидений","Пластик","Комбинированно"]}),new e({key:"color",label:"Цвет",type:"select",required:!1,options:f,allowCustom:!0}),new e({key:"comment",label:"Комментарий",type:"textarea",required:!1}),new e({key:"name",label:"Имя",type:"text",required:!0}),new e({key:"phone",label:"Телефон",type:"phone",required:!0}),new e({key:"email",label:"Email",type:"email",required:!1})]}),new w({key:"sewing",label:"Пошив",fields:[new e({key:"brand",label:"Марка авто",type:"select",required:!0,options:c,allowCustom:!0}),new e({key:"model",label:"Модель авто",type:"select",required:!0,options:[],allowCustom:!0}),new e({key:"workType",label:"Тип работ",type:"select",required:!0,options:["Пошив чехлов","Пошив подлокотника","Пошив ковриков","Комбинированно"]}),new e({key:"material",label:"Материал",type:"carousel",required:!0,options:V}),new e({key:"color",label:"Цвет",type:"select",required:!1,options:f,allowCustom:!0}),new e({key:"comment",label:"Комментарий",type:"textarea",required:!1}),new e({key:"name",label:"Имя",type:"text",required:!0}),new e({key:"phone",label:"Телефон",type:"phone",required:!0}),new e({key:"email",label:"Email",type:"email",required:!1})]}),new w({key:"embroidery",label:"Вышивка",fields:[new e({key:"brand",label:"Марка авто",type:"select",required:!0,options:c,allowCustom:!0}),new e({key:"model",label:"Модель авто",type:"select",required:!0,options:[],allowCustom:!0}),new e({key:"workType",label:"Тип работ",type:"select",required:!0,options:["Вышивка логотипа","Декоративная вышивка","Именная вышивка","Комбинированно"]}),new e({key:"color",label:"Цвет",type:"select",required:!1,options:f,allowCustom:!0}),new e({key:"comment",label:"Комментарий",type:"textarea",required:!1}),new e({key:"name",label:"Имя",type:"text",required:!0}),new e({key:"phone",label:"Телефон",type:"phone",required:!0}),new e({key:"email",label:"Email",type:"email",required:!1})]}),new w({key:"electronics",label:"Автоэлектрика",fields:[new e({key:"brand",label:"Марка авто",type:"select",required:!0,options:c,allowCustom:!0}),new e({key:"model",label:"Модель авто",type:"select",required:!0,options:[],allowCustom:!0}),new e({key:"workType",label:"Тип работ",type:"select",required:!0,options:["Установка подсветки","Установка USB","Мониторинг","Другое"]}),new e({key:"comment",label:"Комментарий",type:"textarea",required:!1}),new e({key:"name",label:"Имя",type:"text",required:!0}),new e({key:"phone",label:"Телефон",type:"phone",required:!0}),new e({key:"email",label:"Email",type:"email",required:!1})]}),new w({key:"carpets",label:"Ковры/органайзеры",fields:[new e({key:"brand",label:"Марка авто",type:"select",required:!0,options:c,allowCustom:!0}),new e({key:"model",label:"Модель авто",type:"select",required:!0,options:[],allowCustom:!0}),new e({key:"workType",label:"Тип работ",type:"select",required:!0,options:["EVO ковры","3D ковры","Органайзеры","Другое"]}),new e({key:"material",label:"Материал",type:"carousel",required:!1,options:V}),new e({key:"color",label:"Цвет",type:"select",required:!1,options:f,allowCustom:!0}),new e({key:"comment",label:"Комментарий",type:"textarea",required:!1}),new e({key:"name",label:"Имя",type:"text",required:!0}),new e({key:"phone",label:"Телефон",type:"phone",required:!0}),new e({key:"email",label:"Email",type:"email",required:!1})]})],J={class:"order-modal"},Y={class:"order-modal__scroll"},Z={class:"order-modal__fields"},ee={key:0,class:"order-modal__row order-modal__row--full"},le=["value"],te={key:0,class:"order-modal__service-label order-modal__row order-modal__row--full"},re={key:1,class:"order-modal__row order-modal__row--auto"},oe={key:0},ae=["onUpdate:modelValue","required"],se={key:0,value:"Другое"},ue=["onUpdate:modelValue"],ne={key:2,class:"material-carousel__wrap"},ie=["onClick"],de=["src","alt"],ye=["title"],pe=["onUpdate:modelValue","required","placeholder"],me=["value"],ce=["value"],ke=["onUpdate:modelValue","required","placeholder"],be={class:"order-modal__footer"},we=["disabled"],ve={key:0,class:"order-modal__success"},qe={__name:"OrderModal",props:{defaultService:{type:String,default:""},defaultWorkType:{type:String,default:""},defaultCategory:{type:String,default:""}},emits:["close"],setup(M,{emit:_}){const h=_,y=M;function U(n){if(!n)return"";const l=E.find(t=>t.key===n);if(l)return l.key;const r=E.find(t=>t.label===n);return r?r.key:""}const v=b(U(y.defaultService)),k=O(()=>E.find(n=>n.key===v.value)||null),u=b({}),S=b(!1),R=b(!1),X=E.map(n=>({value:n.key,label:n.label}));B(k,n=>{n&&(u.value={},n.fields.forEach(l=>{l.key==="workType"&&y.defaultWorkType?u.value[l.key]=y.defaultWorkType:u.value[l.key]=""}))},{immediate:!0});const F=b(!1),x=b(!1);B(()=>u.value.brand,n=>{c.includes(n)?(F.value=!1,u.value.model="",x.value=!1):F.value=!0}),B(()=>u.value.model,n=>{A.value.includes(n)?x.value=!1:x.value=!0});const A=O(()=>{const n=u.value.brand;return Q[n]||[]}),D=b(null),W=O(()=>window.innerWidth>700);function P(n){let l=D.value;if(Array.isArray(l)&&(l=l[0]),l&&l.$el&&(l=l.$el),l){const r=l.querySelector(".material-carousel__item"),t=parseFloat(getComputedStyle(l).gap)||0,j=r?r.offsetWidth+t:120,K=l.scrollWidth-l.clientWidth;let C=l.scrollLeft+n*j;C<0&&(C=0),C>K&&(C=K),l.scrollTo({left:C,behavior:"smooth"})}}function L(){h("close")}async function z(){S.value=!0,await new Promise(n=>setTimeout(n,1200)),S.value=!1,R.value=!0,setTimeout(L,1800)}return(n,l)=>(a(),o("div",{class:"order-modal__backdrop",onClick:N(L,["self"])},[s("div",J,[s("div",{class:"order-modal__header"},[l[7]||(l[7]=s("h2",{class:"order-modal__title"},"Получить расчет",-1)),s("button",{class:"order-modal__close",onClick:L,"aria-label":"Закрыть"},"×")]),s("form",{class:"order-modal__form",onSubmit:N(z,["prevent"])},[s("div",Y,[s("div",Z,[!v.value&&!y.defaultService?(a(),o("div",ee,[s("label",null,[l[9]||(l[9]=$("Выберите услугу* ")),d(s("select",{"onUpdate:modelValue":l[0]||(l[0]=r=>v.value=r),required:""},[l[8]||(l[8]=s("option",{disabled:"",value:""},"Выберите",-1)),(a(!0),o(i,null,q(H(X),r=>(a(),o("option",{key:r.value,value:r.value},p(r.label),9,le))),128))],512),[[T,v.value]])])])):(a(),o(i,{key:1},[k.value?(a(),o("div",te,p(k.value.label),1)):m("",!0),k.value?(a(),o("div",re,[(a(!0),o(i,null,q(k.value.fields,r=>(a(),o("label",{key:r.key,class:I(["order-modal__field",`field-${r.key}`])},[$(p(r.label),1),r.required?(a(),o("span",oe,"*")):m("",!0),r.type==="select"?(a(),o(i,{key:1},[d(s("select",{"onUpdate:modelValue":t=>u.value[r.key]=t,required:r.required},[l[10]||(l[10]=s("option",{disabled:"",value:""},"Выберите",-1)),(a(!0),o(i,null,q(r.options,t=>(a(),o("option",{key:t.value||t},p(t.label||t),1))),128)),r.allowCustom?(a(),o("option",se,"Другое")):m("",!0)],8,ae),[[T,u.value[r.key]]]),r.allowCustom&&u.value[r.key]==="Другое"?d((a(),o("input",{key:0,"onUpdate:modelValue":t=>u.value[r.key]=t,placeholder:"Введите значение"},null,8,ue)),[[g,u.value[r.key]]]):m("",!0)],64)):r.type==="carousel"?(a(),o("div",ne,[W.value?(a(),o("button",{key:0,type:"button",class:"carousel-arrow left",onClick:l[1]||(l[1]=t=>P(-1))},l[11]||(l[11]=[s("svg",{width:"28",height:"28",viewBox:"0 0 28 28"},[s("circle",{cx:"14",cy:"14",r:"13",fill:"none",stroke:"#FFD600","stroke-width":"2"}),s("polyline",{points:"16,8 10,14 16,20",fill:"none",stroke:"#FFD600","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):m("",!0),s("div",{class:"material-carousel",ref_for:!0,ref_key:"materialCarouselRef",ref:D},[(a(!0),o(i,null,q(r.options,t=>(a(),o("div",{key:t.value,class:I(["material-carousel__item",{selected:u.value.material===t.value}]),onClick:j=>u.value.material=t.value},[s("img",{src:t.img,alt:t.label,class:"material-carousel__img"},null,8,de),s("div",{class:"material-carousel__label",title:t.label},p(t.label),9,ye)],10,ie))),128))],512),W.value?(a(),o("button",{key:1,type:"button",class:"carousel-arrow right",onClick:l[2]||(l[2]=t=>P(1))},l[12]||(l[12]=[s("svg",{width:"28",height:"28",viewBox:"0 0 28 28"},[s("circle",{cx:"14",cy:"14",r:"13",fill:"none",stroke:"#FFD600","stroke-width":"2"}),s("polyline",{points:"12,8 18,14 12,20",fill:"none",stroke:"#FFD600","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):m("",!0)])):r.type==="textarea"?d((a(),o("textarea",{key:3,"onUpdate:modelValue":t=>u.value[r.key]=t,required:r.required,rows:"2",placeholder:r.label},null,8,pe)),[[g,u.value[r.key]]]):r.key==="brand"?(a(),o(i,{key:4},[F.value?d((a(),o("input",{key:1,"onUpdate:modelValue":l[4]||(l[4]=t=>u.value.brand=t),required:"",placeholder:"Введите марку"},null,512)),[[g,u.value.brand]]):d((a(),o("select",{key:0,"onUpdate:modelValue":l[3]||(l[3]=t=>u.value.brand=t),required:""},[l[13]||(l[13]=s("option",{disabled:"",value:""},"Выберите",-1)),(a(!0),o(i,null,q(r.options,t=>(a(),o("option",{key:t,value:t},p(t),9,me))),128)),l[14]||(l[14]=s("option",{value:"Другое"},"Другое",-1))],512)),[[T,u.value.brand]])],64)):r.key==="model"?(a(),o(i,{key:5},[!x.value&&A.value.length?d((a(),o("select",{key:0,"onUpdate:modelValue":l[5]||(l[5]=t=>u.value.model=t),required:""},[l[15]||(l[15]=s("option",{disabled:"",value:""},"Выберите",-1)),(a(!0),o(i,null,q(A.value,t=>(a(),o("option",{key:t,value:t},p(t),9,ce))),128)),l[16]||(l[16]=s("option",{value:"Другое"},"Другое",-1))],512)),[[T,u.value.model]]):d((a(),o("input",{key:1,"onUpdate:modelValue":l[6]||(l[6]=t=>u.value.model=t),required:"",placeholder:"Введите модель"},null,512)),[[g,u.value.model]])],64)):d((a(),o("input",{key:6,"onUpdate:modelValue":t=>u.value[r.key]=t,required:r.required,placeholder:r.label},null,8,ke)),[[g,u.value[r.key]]])],2))),128))])):m("",!0)],64))])]),s("div",be,[s("button",{class:"order-modal__submit",disabled:S.value},p(S.value?"Отправка...":"Отправить заказ"),9,we),R.value?(a(),o("div",ve,"Спасибо! Мы свяжемся с вами в ближайшее время.")):m("",!0)])],32)])]))}},_e=G(qe,[["__scopeId","data-v-7b89c28d"]]);export{_e as O};
