import{_ as H,f as b,c as O,p as B,d as r,o as a,b as s,y as N,q as $,v as d,z as T,F as n,l as f,t as p,A as Q,e as m,i as I,B as g}from"./index-BTmVJ9D_.js";class e{constructor({key:_,label:h,type:y="text",required:U=!1,options:v=[],allowCustom:k=!1}){this.key=_,this.label=h,this.type=y,this.required=U,this.options=v,this.allowCustom=k}}class w{constructor({key:_,label:h,fields:y}){this.key=_,this.label=h,this.fields=y}}const c=["Toyota","BMW","Mercedes","Audi","Lexus","Volkswagen","Hyundai","Kia","Ford","Nissan"],J={Toyota:["Camry","Land Cruiser","Corolla"],BMW:["3 Series","5 Series","X5"],Mercedes:["E-Class","S-Class","GLC"],Audi:["A4","Q5","A6"],Lexus:["RX","ES","GX"],Volkswagen:["Passat","Tiguan","Polo"],Hyundai:["Solaris","Tucson","Creta"],Kia:["Rio","Sportage","Ceed"],Ford:["Focus","Kuga","Mondeo"],Nissan:["Qashqai","X-Trail","Almera"]},V=[{value:"Кожа",label:"Кожа",img:"/legion-tomsk/images/materials/leather.jpg"},{value:"Алькантара",label:"Алькантара",img:"/legion-tomsk/images/materials/alcantara.jpg"},{value:"Экокожа",label:"Экокожа",img:"/legion-tomsk/images/materials/eco-leather.jpg"},{value:"Комбинированно",label:"Комбинированно",img:"/legion-tomsk/images/materials/combined.jpg"}],q=["Черный","Бежевый","Коричневый","Красный","Серый","Синий","Белый","Другой"],E=[new w({key:"peretyazhka",label:"Перетяжка",fields:[new e({key:"brand",label:"Марка авто",type:"select",required:!0,options:c,allowCustom:!0}),new e({key:"model",label:"Модель авто",type:"select",required:!0,options:[],allowCustom:!0}),new e({key:"workType",label:"Тип работ",type:"select",required:!0,options:["Сиденья","Руль","Потолок","Двери","Пол","Торпедо","Подлокотник","Комбинированно"]}),new e({key:"material",label:"Материал",type:"carousel",required:!0,options:V}),new e({key:"color",label:"Цвет",type:"select",required:!1,options:q,allowCustom:!0}),new e({key:"comment",label:"Комментарий",type:"textarea",required:!1}),new e({key:"name",label:"Имя",type:"text",required:!0}),new e({key:"phone",label:"Телефон",type:"phone",required:!0}),new e({key:"email",label:"Email",type:"email",required:!1})]}),new w({key:"tuning",label:"Тюнинг",fields:[new e({key:"brand",label:"Марка авто",type:"select",required:!0,options:c,allowCustom:!0}),new e({key:"model",label:"Модель авто",type:"select",required:!0,options:[],allowCustom:!0}),new e({key:"workType",label:"Тип работ",type:"select",required:!0,options:["Тюнинг салона","Детали интерьера","Панели","Комбинированно"]}),new e({key:"material",label:"Материал",type:"carousel",required:!1,options:V}),new e({key:"color",label:"Цвет",type:"select",required:!1,options:q,allowCustom:!0}),new e({key:"comment",label:"Комментарий",type:"textarea",required:!1}),new e({key:"name",label:"Имя",type:"text",required:!0}),new e({key:"phone",label:"Телефон",type:"phone",required:!0}),new e({key:"email",label:"Email",type:"email",required:!1})]}),new w({key:"restoration",label:"Реставрация",fields:[new e({key:"brand",label:"Марка авто",type:"select",required:!0,options:c,allowCustom:!0}),new e({key:"model",label:"Модель авто",type:"select",required:!0,options:[],allowCustom:!0}),new e({key:"workType",label:"Тип работ",type:"select",required:!0,options:["Восстановление кожи","Ремонт сидений","Пластик","Комбинированно"]}),new e({key:"color",label:"Цвет",type:"select",required:!1,options:q,allowCustom:!0}),new e({key:"comment",label:"Комментарий",type:"textarea",required:!1}),new e({key:"name",label:"Имя",type:"text",required:!0}),new e({key:"phone",label:"Телефон",type:"phone",required:!0}),new e({key:"email",label:"Email",type:"email",required:!1})]}),new w({key:"sewing",label:"Пошив",fields:[new e({key:"brand",label:"Марка авто",type:"select",required:!0,options:c,allowCustom:!0}),new e({key:"model",label:"Модель авто",type:"select",required:!0,options:[],allowCustom:!0}),new e({key:"workType",label:"Тип работ",type:"select",required:!0,options:["Пошив чехлов","Пошив подлокотника","Пошив ковриков","Комбинированно"]}),new e({key:"material",label:"Материал",type:"carousel",required:!0,options:V}),new e({key:"color",label:"Цвет",type:"select",required:!1,options:q,allowCustom:!0}),new e({key:"comment",label:"Комментарий",type:"textarea",required:!1}),new e({key:"name",label:"Имя",type:"text",required:!0}),new e({key:"phone",label:"Телефон",type:"phone",required:!0}),new e({key:"email",label:"Email",type:"email",required:!1})]}),new w({key:"embroidery",label:"Вышивка",fields:[new e({key:"brand",label:"Марка авто",type:"select",required:!0,options:c,allowCustom:!0}),new e({key:"model",label:"Модель авто",type:"select",required:!0,options:[],allowCustom:!0}),new e({key:"workType",label:"Тип работ",type:"select",required:!0,options:["Вышивка логотипа","Декоративная вышивка","Именная вышивка","Комбинированно"]}),new e({key:"color",label:"Цвет",type:"select",required:!1,options:q,allowCustom:!0}),new e({key:"comment",label:"Комментарий",type:"textarea",required:!1}),new e({key:"name",label:"Имя",type:"text",required:!0}),new e({key:"phone",label:"Телефон",type:"phone",required:!0}),new e({key:"email",label:"Email",type:"email",required:!1})]}),new w({key:"electronics",label:"Автоэлектрика",fields:[new e({key:"brand",label:"Марка авто",type:"select",required:!0,options:c,allowCustom:!0}),new e({key:"model",label:"Модель авто",type:"select",required:!0,options:[],allowCustom:!0}),new e({key:"workType",label:"Тип работ",type:"select",required:!0,options:["Установка подсветки","Установка USB","Мониторинг","Другое"]}),new e({key:"comment",label:"Комментарий",type:"textarea",required:!1}),new e({key:"name",label:"Имя",type:"text",required:!0}),new e({key:"phone",label:"Телефон",type:"phone",required:!0}),new e({key:"email",label:"Email",type:"email",required:!1})]}),new w({key:"carpets",label:"Ковры/органайзеры",fields:[new e({key:"brand",label:"Марка авто",type:"select",required:!0,options:c,allowCustom:!0}),new e({key:"model",label:"Модель авто",type:"select",required:!0,options:[],allowCustom:!0}),new e({key:"workType",label:"Тип работ",type:"select",required:!0,options:["EVO ковры","3D ковры","Органайзеры","Другое"]}),new e({key:"material",label:"Материал",type:"carousel",required:!1,options:V}),new e({key:"color",label:"Цвет",type:"select",required:!1,options:q,allowCustom:!0}),new e({key:"comment",label:"Комментарий",type:"textarea",required:!1}),new e({key:"name",label:"Имя",type:"text",required:!0}),new e({key:"phone",label:"Телефон",type:"phone",required:!0}),new e({key:"email",label:"Email",type:"email",required:!1})]})],Y={class:"order-modal"},Z={class:"order-modal__scroll"},ee={class:"order-modal__fields"},le={key:0,class:"order-modal__row order-modal__row--full"},te=["value"],oe={key:0,class:"order-modal__service-label order-modal__row order-modal__row--full"},re={key:1,class:"order-modal__row order-modal__row--auto"},ae={key:0},se=["value"],ue=["value"],ie=["onUpdate:modelValue","required"],ne={key:0,value:"Другое"},de=["onUpdate:modelValue"],ye={key:4,class:"material-carousel__wrap"},pe=["onClick"],me=["src","alt"],ce=["title"],ke=["onUpdate:modelValue","required","placeholder"],be=["onUpdate:modelValue","required","placeholder"],we={class:"order-modal__footer"},ve=["disabled"],fe={key:0,class:"order-modal__success"},qe={__name:"OrderModal",props:{defaultService:{type:String,default:""},defaultWorkType:{type:String,default:""},defaultCategory:{type:String,default:""}},emits:["close"],setup(M,{emit:_}){const h=_,y=M;function U(i){if(!i)return"";const l=E.find(t=>t.key===i);if(l)return l.key;const o=E.find(t=>t.label===i);return o?o.key:""}const v=b(U(y.defaultService)),k=O(()=>E.find(i=>i.key===v.value)||null),u=b({}),S=b(!1),R=b(!1),X=E.map(i=>({value:i.key,label:i.label}));B(k,i=>{i&&(u.value={},i.fields.forEach(l=>{l.key==="workType"&&y.defaultWorkType?u.value[l.key]=y.defaultWorkType:u.value[l.key]=""}))},{immediate:!0});const F=b(!1),x=b(!1);B(()=>u.value.brand,(i,l)=>{i!==l&&(u.value.model="",x.value=!1),c.includes(i)?F.value=!1:F.value=!0}),B(()=>u.value.model,i=>{A.value.includes(i)?x.value=!1:x.value=!0});const A=O(()=>{const i=(u.value.brand||"").trim();return J[i]||[]}),W=b(null),D=O(()=>window.innerWidth>700);function P(i){let l=W.value;if(Array.isArray(l)&&(l=l[0]),l&&l.$el&&(l=l.$el),l){const o=l.querySelector(".material-carousel__item"),t=parseFloat(getComputedStyle(l).gap)||0,j=(o?o.offsetWidth:120)+t,G=l.clientWidth,K=l.scrollWidth-G;let C=l.scrollLeft+i*j;i<0&&C<0&&(C=0),i>0&&C>K&&(C=K),l.scrollTo({left:C,behavior:"smooth"})}}function L(){h("close")}async function z(){S.value=!0,await new Promise(i=>setTimeout(i,1200)),S.value=!1,R.value=!0,setTimeout(L,1800)}return(i,l)=>(a(),r("div",{class:"order-modal__backdrop",onClick:N(L,["self"])},[s("div",Y,[s("div",{class:"order-modal__header"},[l[7]||(l[7]=s("h2",{class:"order-modal__title"},"Получить расчет",-1)),s("button",{class:"order-modal__close",onClick:L,"aria-label":"Закрыть"},"×")]),s("form",{class:"order-modal__form",onSubmit:N(z,["prevent"])},[s("div",Z,[s("div",ee,[!v.value&&!y.defaultService?(a(),r("div",le,[s("label",null,[l[9]||(l[9]=$("Выберите услугу* ")),d(s("select",{"onUpdate:modelValue":l[0]||(l[0]=o=>v.value=o),required:""},[l[8]||(l[8]=s("option",{disabled:"",value:""},"Выберите",-1)),(a(!0),r(n,null,f(Q(X),o=>(a(),r("option",{key:o.value,value:o.value},p(o.label),9,te))),128))],512),[[T,v.value]])])])):(a(),r(n,{key:1},[k.value?(a(),r("div",oe,p(k.value.label),1)):m("",!0),k.value?(a(),r("div",re,[(a(!0),r(n,null,f(k.value.fields,o=>(a(),r("label",{key:o.key,class:I(["order-modal__field",`field-${o.key}`])},[$(p(o.label),1),o.required?(a(),r("span",ae,"*")):m("",!0),o.key==="brand"?(a(),r(n,{key:1},[F.value?d((a(),r("input",{key:1,"onUpdate:modelValue":l[2]||(l[2]=t=>u.value.brand=t),required:"",placeholder:"Введите марку"},null,512)),[[g,u.value.brand]]):d((a(),r("select",{key:0,"onUpdate:modelValue":l[1]||(l[1]=t=>u.value.brand=t),required:""},[l[10]||(l[10]=s("option",{disabled:"",value:""},"Выберите",-1)),(a(!0),r(n,null,f(o.options,t=>(a(),r("option",{key:t,value:t},p(t),9,se))),128)),l[11]||(l[11]=s("option",{value:"Другое"},"Другое",-1))],512)),[[T,u.value.brand]])],64)):o.key==="model"?(a(),r(n,{key:2},[!x.value&&A.value.length?d((a(),r("select",{key:0,"onUpdate:modelValue":l[3]||(l[3]=t=>u.value.model=t),required:""},[l[12]||(l[12]=s("option",{disabled:"",value:""},"Выберите",-1)),(a(!0),r(n,null,f(A.value,t=>(a(),r("option",{key:t,value:t},p(t),9,ue))),128)),l[13]||(l[13]=s("option",{value:"Другое"},"Другое",-1))],512)),[[T,u.value.model]]):d((a(),r("input",{key:1,"onUpdate:modelValue":l[4]||(l[4]=t=>u.value.model=t),required:"",placeholder:"Введите модель"},null,512)),[[g,u.value.model]])],64)):o.type==="select"?(a(),r(n,{key:3},[d(s("select",{"onUpdate:modelValue":t=>u.value[o.key]=t,required:o.required},[l[14]||(l[14]=s("option",{disabled:"",value:""},"Выберите",-1)),(a(!0),r(n,null,f(o.options,t=>(a(),r("option",{key:t.value||t},p(t.label||t),1))),128)),o.allowCustom?(a(),r("option",ne,"Другое")):m("",!0)],8,ie),[[T,u.value[o.key]]]),o.allowCustom&&u.value[o.key]==="Другое"?d((a(),r("input",{key:0,"onUpdate:modelValue":t=>u.value[o.key]=t,placeholder:"Введите значение"},null,8,de)),[[g,u.value[o.key]]]):m("",!0)],64)):o.type==="carousel"?(a(),r("div",ye,[D.value?(a(),r("button",{key:0,type:"button",class:"carousel-arrow left",onClick:l[5]||(l[5]=t=>P(-1))},l[15]||(l[15]=[s("svg",{width:"28",height:"28",viewBox:"0 0 28 28"},[s("circle",{cx:"14",cy:"14",r:"13",fill:"none",stroke:"#FFD600","stroke-width":"2"}),s("polyline",{points:"16,8 10,14 16,20",fill:"none",stroke:"#FFD600","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):m("",!0),s("div",{class:"material-carousel",ref_for:!0,ref_key:"materialCarouselRef",ref:W},[(a(!0),r(n,null,f(o.options,t=>(a(),r("div",{key:t.value,class:I(["material-carousel__item",{selected:u.value.material===t.value}]),onClick:j=>u.value.material=t.value},[s("img",{src:t.img,alt:t.label,class:"material-carousel__img"},null,8,me),s("div",{class:"material-carousel__label",title:t.label},p(t.label),9,ce)],10,pe))),128))],512),D.value?(a(),r("button",{key:1,type:"button",class:"carousel-arrow right",onClick:l[6]||(l[6]=t=>P(1))},l[16]||(l[16]=[s("svg",{width:"28",height:"28",viewBox:"0 0 28 28"},[s("circle",{cx:"14",cy:"14",r:"13",fill:"none",stroke:"#FFD600","stroke-width":"2"}),s("polyline",{points:"12,8 18,14 12,20",fill:"none",stroke:"#FFD600","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):m("",!0)])):o.type==="textarea"?d((a(),r("textarea",{key:5,"onUpdate:modelValue":t=>u.value[o.key]=t,required:o.required,rows:"2",placeholder:o.label},null,8,ke)),[[g,u.value[o.key]]]):d((a(),r("input",{key:6,"onUpdate:modelValue":t=>u.value[o.key]=t,required:o.required,placeholder:o.label},null,8,be)),[[g,u.value[o.key]]])],2))),128))])):m("",!0)],64))])]),s("div",we,[s("button",{class:"order-modal__submit",disabled:S.value},p(S.value?"Отправка...":"Отправить заказ"),9,ve),R.value?(a(),r("div",fe,"Спасибо! Мы свяжемся с вами в ближайшее время.")):m("",!0)])],32)])]))}},he=H(qe,[["__scopeId","data-v-76c5d62b"]]);export{he as O};
